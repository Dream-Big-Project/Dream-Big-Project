<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dream Big ‚Äî Dashboard (Fixed Stage)</title>
<style>
  :root{
    --navy:#071735;
    --navy-2:#0e274f;
    --gold:#DCAE3A;
    --gold-2:#F0C75E;
    --muted:#9fb0c7;
    --card-radius:12px;
    --stage-w:995px;
    --stage-h:985px;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  }

  /* Themes */
  body.dark{
    --bg: linear-gradient(180deg,var(--navy),var(--navy-2));
    --surface: rgba(255,255,255,0.03);
    --text:#ffffff;
    --glass: rgba(255,255,255,0.03);
    --muted: #9fb0c7;
  }
  body.light{
    --bg: linear-gradient(180deg,#f6f8fb,#eef3fb);
    --surface: #ffffff;
    --text:#071735;
    --glass: rgba(7,23,53,0.04);
    --muted: #6b7280;
  }

  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  /* Fixed stage requested */
  .stage{
    width: var(--stage-w);
    height: var(--stage-h);
    max-width: 100%;
    max-height: 100%;
    margin: 18px auto;
    border-radius: 14px;
    overflow: auto;
    display:grid;
    grid-template-columns: 1fr;
    background: transparent;
    padding: 0;
  }

  /* Larger screens layout */
  @media(min-width:980px){
    .stage { grid-template-columns: var(--sidebar-w, 300px) 1fr; gap:18px; padding:18px; }
  }

  /* Sidebar overlay and panel */
  .overlay { position:fixed; inset:0; background:rgba(2,6,20,0.45); opacity:0; pointer-events:none; transition:opacity .32s ease; z-index:90; }
  .overlay.show { opacity:1; pointer-events:auto; }

  .sidebar {
    width:300px;
    background:var(--surface);
    padding:18px;
    border-radius:12px;
    box-shadow:0 12px 40px rgba(2,6,20,0.45);
    transform: translateX(-22px);
    opacity:0;
    transition: transform .34s cubic-bezier(.2,.9,.2,1), opacity .34s ease;
    z-index:95;
    position:fixed;
    left:18px;
    top:18px;
    bottom:18px;
    overflow:auto;
  }
  .sidebar.open { transform: translateX(0); opacity:1; }
  /* On large screens, make sidebar static within stage */
  @media(min-width:980px){
    .sidebar{ position:relative; left:auto; top:auto; bottom:auto; transform:none; opacity:1; }
    .overlay{ display:none; }
  }

  .brand{display:flex;gap:12px;align-items:center}
  .mark{width:54px;height:54px;border-radius:12px;background:linear-gradient(90deg,var(--gold),var(--gold-2));}
  .brand .title{font-weight:900}
  .muted{color:var(--muted);font-weight:800;font-size:13px}

  nav.main-nav{margin-top:18px;display:flex;flex-direction:column;gap:8px}
  .nav-item{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;font-weight:800}
  .nav-item:hover{background:var(--glass)}

  .tiers{margin-top:14px;padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(220,174,58,0.06), rgba(255,255,255,0.01));}
  .tier-badge{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--gold),var(--gold-2));color:var(--navy);font-weight:900}

  .sidebar-footer{position:absolute;left:18px;right:18px;bottom:18px}
  .logout-btn{width:100%;padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.06);font-weight:900;cursor:pointer}

  /* Main area */
  .main { padding:18px; min-height:calc(var(--stage-h) - 36px); box-sizing:border-box; }
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
  .left-controls{display:flex;gap:12px;align-items:center}
  .menu-btn{background:transparent;border:0;color:var(--text);font-weight:900;padding:8px 12px;border-radius:8px;cursor:pointer}
  .title{font-weight:900;font-size:20px}
  .right-controls{display:flex;gap:12px;align-items:center}
  .theme-btn{padding:8px;border-radius:8px;border:0;background:var(--glass);cursor:pointer}
  .avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(180deg,#0c3a6b,#0b2340);display:flex;align-items:center;justify-content:center;font-weight:900;cursor:pointer}

  .profile-menu{position:absolute;right:28px;top:68px;background:var(--surface);padding:8px;border-radius:10px;display:none;box-shadow:0 12px 40px rgba(2,6,20,0.25);min-width:180px}
  .profile-menu a{display:block;padding:8px;border-radius:8px;text-decoration:none;color:var(--text);font-weight:800}
  .profile-menu a:hover{background:var(--glass)}

  .layout{display:grid;gap:12px;grid-template-columns:1fr}
  @media(min-width:980px){ .layout{grid-template-columns:1fr 360px} }

  .card{background:var(--surface);padding:12px;border-radius:12px;box-shadow:0 12px 40px rgba(2,6,20,0.12)}
  .kpi-row{display:flex;gap:12px;flex-wrap:wrap}
  .kpi{min-width:160px;padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent);font-weight:900}

  /* placed layout per user request:
     - top row: Active Projects + Total Contribution
     - below them: Referrals + Wallet
  */
  .kpi-top { display:flex; gap:12px; margin-bottom:12px; }
  .kpi-bottom { display:flex; gap:12px; margin-bottom:12px; }

  .projects{display:flex;flex-direction:column;gap:12px;margin-top:6px}
  .project{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px}
  .project .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .progress{height:12px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;margin-top:8px}
  .progress i{display:block;height:100%;width:0%;transition:width .8s cubic-bezier(.2,.9,.2,1)}

  .muted-sm{color:var(--muted);font-weight:800;font-size:13px}

  /* form controls */
  input, select { padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text) }

  footer.site-footer{margin-top:12px;text-align:center;color:var(--muted);font-weight:800;padding:10px}

  /* responsive smaller than stage: allow full width and auto-height */
  @media(max-width:1000px){
    .stage{ width: calc(100% - 24px); height: auto; margin:12px; border-radius:12px; }
    .sidebar{ left:8px; top:8px; bottom:8px; width:84%; max-width:380px; border-radius:12px; }
  }
</style>
</head>
<body class="dark">

  <!-- overlay and sidebar -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <aside id="sidebar" class="sidebar" aria-hidden="true">
    <div class="brand">
      <div class="mark" aria-hidden="true"></div>
      <div>
        <div class="title">Dream Big Project</div>
        <div class="muted">Member Dashboard</div>
      </div>
    </div>

    <div class="tiers" role="region" aria-label="Member tier summary">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="muted">Your Tier</div>
          <div style="font-weight:900">Pathfinder <span class="tier-badge">PRO</span></div>
        </div>
        <div style="text-align:right">
          <div class="muted">Months</div>
          <div style="font-weight:900">8 / 24</div>
        </div>
      </div>
      <div style="height:8px"></div>
      <div class="progress" style="height:12px"><i style="width:33%;background:linear-gradient(90deg,var(--gold),var(--gold-2))"></i></div>
      <div style="height:8px"></div>
      <button id="viewTiersBtn" class="btn">View Tier Details</button>
    </div>

    <nav class="main-nav" role="navigation" aria-label="Main">
      <div class="nav-item" data-target="dashboard">üè† <div>Dashboard</div></div>
      <div class="nav-item" data-target="projects">üìÅ <div>My Projects</div></div>
      <div class="nav-item" data-target="tracker">üìä <div>Project Tracker</div></div>
      <div class="nav-item" data-target="referrals">üîó <div>Referrals & Rewards</div></div>
      <div class="nav-item" data-target="wallet">üíº <div>Wallet</div></div>
      <div class="nav-item" data-target="docs">üìÑ <div>Documents</div></div>
      <div class="nav-item" data-target="settings">‚öôÔ∏è <div>Settings & Privacy</div></div>
      <div class="nav-item" data-target="help">‚ùì <div>Help & Support</div></div>
    </nav>

    <div class="sidebar-footer">
      <button id="sidebarLogout" class="logout-btn">Logout</button>
    </div>
  </aside>

  <!-- stage -->
  <div class="stage" role="application" aria-label="Dream Big Dashboard">
    <main class="main" role="main">

      <div class="topbar">
        <div class="left-controls">
          <button id="menuBtn" class="menu-btn" aria-controls="sidebar" aria-expanded="false">‚ò∞</button>
          <div>
            <div class="title">Dashboard</div>
            <div class="muted-sm" id="todayLabel">‚Äî</div>
          </div>
        </div>

        <div class="right-controls">
          <button id="themeToggle" class="theme-btn" title="Toggle theme">üåô</button>
          <div style="position:relative">
            <div id="avatarBtn" class="avatar" title="Profile">PD</div>
            <div id="profileMenu" class="profile-menu" role="menu" aria-hidden="true">
              <a id="editProfile" href="#">Edit Profile</a>
              <a id="settingsLink" href="#">Settings & Privacy</a>
              <a id="profileLogout" href="#">Logout</a>
            </div>
          </div>
        </div>
      </div>

      <div class="layout">
        <!-- left column -->
        <section>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <div style="font-weight:900">Welcome back, <span id="displayName">Member</span></div>
                <div class="muted-sm">Pathfinder ‚Ä¢ Active</div>
              </div>
              <div><button id="quickAdd" class="btn">Add Project</button></div>
            </div>

            <div style="height:12px"></div>

            <!-- TOP KPIs: Active Projects + Total Contribution -->
            <div class="kpi-top">
              <div class="kpi"><div class="muted-sm">Active Projects</div><div style="font-size:18px;font-weight:900" id="kActive">0</div></div>
              <div class="kpi"><div class="muted-sm">Total Contribution</div><div style="font-size:18px;font-weight:900" id="kTotal">$0</div></div>
            </div>

            <!-- SECONDARY KPIs: Referrals + Wallet (moved below) -->
            <div class="kpi-bottom">
              <div class="kpi"><div class="muted-sm">Referrals</div><div style="font-size:18px;font-weight:900" id="kRef">0</div></div>
              <div class="kpi"><div class="muted-sm">Wallet Balance</div><div style="font-size:18px;font-weight:900" id="kWallet">$0</div></div>
            </div>

            <div style="height:12px"></div>

            <div class="projects" id="projectsList" aria-live="polite"></div>

            <div style="height:12px"></div>

            <div class="muted-sm">Add Contribution / Project</div>
            <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px">
              <input id="projName" placeholder="Project name" />
              <input id="projAmt" type="number" placeholder="Amount USD" value="250" />
              <select id="projTier"><option>Seed</option><option>Spark</option><option>Builder</option><option>Creator</option><option>Visionary</option><option>Pathfinder</option></select>
              <select id="projPay"><option>Bank Deposit</option><option>USDT</option></select>
              <button id="projSubmit" class="btn">Submit</button>
            </div>
          </div>
        </section>

        <!-- right column: single tracker panel -->
        <aside>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong>Project Tracker</strong><div class="muted-sm">24-month maturity</div></div>
            </div>
            <div id="trackerArea" style="margin-top:12px"></div>
          </div>

          <div style="height:12px"></div>

          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><strong>Referrals & Rewards</strong><div class="muted-sm">Progress to 20 referrals</div></div>
            </div>
            <div style="height:8px"></div>
            <div style="display:flex;gap:8px">
              <input id="referralLink" value="https://dreambigpro.com/r/PRIN1234" />
              <button id="copyBtn" class="btn">Copy</button>
            </div>
            <div style="height:10px"></div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="muted-sm">Verified referrals</div>
              <div style="font-weight:900" id="refCount">0 / 20</div>
            </div>
            <div style="height:8px"></div>
            <div style="background:var(--glass);padding:10px;border-radius:8px;text-align:center">20 verified referrals unlock a one-time smartphone (tier-based)</div>
          </div>
        </aside>
      </div>

      <footer class="site-footer">¬© 2026 Dream Big Project. All rights reserved.</footer>
    </main>
  </div>

<script>
  // Elements
  const overlay = document.getElementById('overlay');
  const sidebar = document.getElementById('sidebar');
  const menuBtn = document.getElementById('menuBtn');
  const themeToggle = document.getElementById('themeToggle');
  const profileBtn = document.getElementById('avatarBtn');
  const profileMenu = document.getElementById('profileMenu');
  const projSubmit = document.getElementById('projSubmit');
  const trackerArea = document.getElementById('trackerArea');

  // Data
  const projects = [];
  let referrals = 14;
  let walletBalance = 0;

  // Utilities
  function addMonths(date, months){ const d=new Date(date); d.setMonth(d.getMonth()+months); return d; }
  function pct(start, end){ const s=new Date(start), e=new Date(end), n=new Date(); if(n<=s) return 0; if(n>=e) return 100; return Math.floor(((n-s)/(e-s))*100); }
  function countdown(end){ const n=new Date(), e=new Date(end); if(n>=e) return 'Matured'; const diff = e - n; const days = Math.floor(diff/(1000*60*60*24)); return Math.floor(days/30) + 'm ' + (days%30) + 'd'; }
  function progressColor(p){
    if(p <= 40) return '#D9534F'; // red
    if(p <= 60) return '#F0AD4E'; // yellow
    return '#28A745'; // green
  }

  // Theme (persist)
  const initialTheme = localStorage.getItem('db-theme') || 'dark';
  setTheme(initialTheme);
  function setTheme(t){
    document.body.classList.remove('dark','light');
    document.body.classList.add(t);
    localStorage.setItem('db-theme', t);
    themeToggle.textContent = t === 'dark' ? 'üåô' : '‚òÄÔ∏è';
  }
  themeToggle.addEventListener('click', ()=> setTheme(document.body.classList.contains('dark') ? 'light' : 'dark'));

  // Menu (open/close)
  function openSidebar(){ sidebar.classList.add('open'); overlay.classList.add('show'); sidebar.setAttribute('aria-hidden','false'); menuBtn.setAttribute('aria-expanded','true'); }
  function closeSidebar(){ sidebar.classList.remove('open'); overlay.classList.remove('show'); sidebar.setAttribute('aria-hidden','true'); menuBtn.setAttribute('aria-expanded','false'); }
  menuBtn.addEventListener('click', ()=> { if(sidebar.classList.contains('open')) closeSidebar(); else openSidebar(); } );
  overlay.addEventListener('click', closeSidebar);

  // Profile menu
  profileBtn.addEventListener('click', (e)=>{ e.stopPropagation(); const vis = profileMenu.style.display === 'block'; profileMenu.style.display = vis ? 'none' : 'block'; profileMenu.setAttribute('aria-hidden', String(!vis)); });
  document.addEventListener('click', (e)=>{ if(!profileMenu.contains(e.target) && !profileBtn.contains(e.target)){ profileMenu.style.display='none'; profileMenu.setAttribute('aria-hidden','true'); } });

  // Logout handlers
  document.getElementById('sidebarLogout').addEventListener('click', ()=> window.location.href='login.html');
  document.getElementById('profileLogout').addEventListener('click', (e)=>{ e.preventDefault(); window.location.href='login.html' });

  // Render functions
  function renderOverview(){
    document.getElementById('kActive').textContent = projects.length;
    const total = projects.reduce((s,p)=> s + Number(p.amount), 0);
    document.getElementById('kTotal').textContent = '$' + total.toLocaleString();
    document.getElementById('kRef').textContent = referrals;
    document.getElementById('kWallet').textContent = '$' + walletBalance.toLocaleString();
    document.getElementById('refCount').textContent = referrals + ' / 20';
  }

  function renderProjects(){
    const list = document.getElementById('projectsList'); list.innerHTML = '';
    trackerArea.innerHTML = '';
    projects.forEach((p, idx) => {
      const per = pct(p.start, p.maturity);
      // project card
      const item = document.createElement('div'); item.className='project';
      item.innerHTML = `
        <div class="meta">
          <div>
            <strong>${p.name}</strong>
            <div class="muted-sm">${p.tier} ‚Ä¢ $${p.amount}</div>
          </div>
          <div style="text-align:right">
            <div class="muted-sm">Matures in</div>
            <strong>${countdown(p.maturity)}</strong>
          </div>
        </div>
        <div class="progress"><i style="width:${per}%; background:${progressColor(per)}"></i></div>
        <div style="display:flex;justify-content:space-between;margin-top:6px">
          <div class="muted-sm">${per}%</div>
          <div class="muted-sm">Target: $${p.amount*10}</div>
        </div>
      `;
      list.appendChild(item);

      // tracker card (single tracker area will contain one card per project; user asked 1 tracker but allow multiple if multiple projects)
      const tr = document.createElement('div'); tr.className='card'; tr.style.marginBottom='10px';
      tr.innerHTML = `<div style="display:flex;justify-content:space-between"><div><strong>${p.name}</strong><div class="muted-sm">${p.tier}</div></div><div>${per}%</div></div><div style="height:8px"></div><div class="progress"><i style="width:${per}%; background:${progressColor(per)}"></i></div><div class="muted-sm" style="margin-top:6px">${countdown(p.maturity)}</div>`;
      trackerArea.appendChild(tr);
    });
    renderOverview();
  }

  // seed demo
  (function seed(){
    const now = new Date();
    projects.push({name:'Agro Processing', amount:250, tier:'Spark', start:addMonths(now,-6).toISOString(), maturity:addMonths(now,18).toISOString()});
    renderProjects();
  })();

  // add project (UI only)
  document.getElementById('projSubmit').addEventListener('click', ()=>{
    const name = document.getElementById('projName').value || 'Untitled';
    const amt = Number(document.getElementById('projAmt').value) || 0;
    if(amt <= 0){ alert('Enter a valid amount'); return; }
    const tier = document.getElementById('projTier').value;
    const start = new Date(), maturity = addMonths(start,24);
    projects.unshift({name, amount:amt, tier, start:start.toISOString(), maturity:maturity.toISOString()});
    alert('Contribution recorded ‚Äî project added to your dashboard (simulation).');
    document.getElementById('projName').value = '';
    renderProjects();
  });

  // copy referral
  document.getElementById('copyBtn').addEventListener('click', ()=>{
    const el = document.getElementById('referralLink'); el.select(); document.execCommand('copy');
    const b = document.getElementById('copyBtn'); b.textContent = 'Copied'; setTimeout(()=> b.textContent = 'Copy',1200);
  });

  // set today label
  document.getElementById('todayLabel').textContent = new Date().toLocaleDateString();

  // ensure sidebar is hidden by default on small screens
  function ensureSidebarState(){
    if(window.innerWidth < 980){ closeSidebar(); } else { sidebar.classList.add('open'); overlay.classList.remove('show'); }
  }
  window.addEventListener('resize', ensureSidebarState);
  ensureSidebarState();

</script>
</body>
</html>
