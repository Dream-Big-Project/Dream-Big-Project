<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Dream Big — Member Dashboard (Mobile)</title>
  <meta name="theme-color" content="#071a2a" />
  <style>
    :root{
      --bg:#061228; --card:#0f2a44; --muted:#9fb3c7; --accent:#f6c44b; --danger:#e14b4b;
      --glass: rgba(255,255,255,0.03); --radius:14px; --gap:12px; --text:#eaf6ff;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#021226 0%, #071a2a 100%);color:var(--text);-webkit-tap-highlight-color:transparent}
    .app{min-height:100vh;display:flex;flex-direction:column;padding:16px;gap:12px;transition:opacity .45s ease}
    header{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#042137;font-weight:800;font-size:16px}
    .title{font-size:16px;font-weight:700}
    .meta{font-size:12px;color:var(--muted)}
    /* single menu button */
    .menu-btn{width:44px;height:44px;border-radius:10px;background:var(--card);display:flex;align-items:center;justify-content:center;border:none;color:var(--muted);font-weight:800}
    /* floating menu panel (hidden by default) */
    .menu-panel{position:absolute;top:72px;right:16px;width:230px;background:linear-gradient(180deg,#072235,#0f2a44);border-radius:12px;padding:8px;box-shadow:0 12px 40px rgba(0,0,0,0.5);transform-origin:top right;opacity:0;pointer-events:none;transform:scale(.95) translateY(-6px);transition:all 180ms ease}
    .menu-panel.open{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}
    .menu-item{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:10px;color:var(--muted);background:transparent;border:none;width:100%;text-align:left;font-weight:700}
    .menu-item:hover{background:rgba(255,255,255,0.02);color:var(--text)}
    .menu-item .hint{font-size:12px;color:var(--muted);font-weight:600}
    /* profile circle kept on header for identity but menu is primary nav */
    .profile{width:40px;height:40px;border-radius:50%;background:linear-gradient(180deg,#16394f,#0f2a44);display:flex;align-items:center;justify-content:center;font-weight:700;cursor:default}
    main{flex:1;overflow:auto;padding-bottom:120px}
    .welcome{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:16px}
    .kpis{display:flex;gap:8px;margin-top:12px}
    .kpi{flex:1;padding:10px;background:var(--card);border-radius:12px;text-align:left}
    .kpi .num{font-size:18px;font-weight:800}
    .card{background:var(--card);padding:14px;border-radius:16px;margin-top:14px}
    .progress{height:10px;background:rgba(255,255,255,0.04);border-radius:10px;margin-top:10px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#ff7a5a,#f6c44b);width:25%}
    .form-row{display:flex;gap:8px;margin-top:12px}
    .input,select{flex:1;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.02);color:var(--muted);font-size:14px}
    .submit{background:var(--accent);color:#042137;padding:10px 14px;border-radius:10px;border:none;font-weight:700}
    .tracker-title{font-weight:800}
    /* bottom referral bar */
    .bottom-bar{position:fixed;left:12px;right:12px;bottom:12px;background:linear-gradient(90deg,#071a2a,#072434);padding:12px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 8px 30px rgba(0,0,0,0.4);z-index:20}
    .ref-count{font-weight:800;font-size:16px}
    .ref-note{font-size:12px;color:var(--muted)}
    .btn{padding:10px 12px;border-radius:10px;border:none}
    .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}
    .btn.warn{background:var(--danger);color:white}
    /* shared modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:linear-gradient(180deg,#072235,#0f2a44);padding:18px;border-radius:12px;min-width:280px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
    .modal h3{margin:0 0 6px 0}
    .modal p{color:var(--muted);margin:0 0 12px 0}
    .modal .actions{display:flex;gap:8px;justify-content:flex-end}
    .modal .row{display:flex;gap:8px;align-items:center;margin-top:10px}
    .modal .copy{background:rgba(255,255,255,0.04);padding:10px;border-radius:8px;flex:1;color:var(--muted);font-size:13px;word-break:break-all}
    .modal .copy .label{font-size:11px;color:var(--muted);display:block;margin-bottom:6px}
    .modal .copy-btn{margin-left:8px;padding:8px;border-radius:8px;border:none;background:var(--accent);color:#042137;font-weight:700}
    /* spinner overlay */
    .spinner-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:70}
    .spinner-panel{display:flex;flex-direction:column;align-items:center;gap:14px;background:rgba(2,18,30,0.92);padding:22px;border-radius:12px;backdrop-filter:blur(6px)}
    .spinner{width:110px;height:110px;border-radius:50%;display:grid;place-items:center;position:relative}
    .spinner:before{content:'';position:absolute;inset:0;border-radius:50%;background:
      conic-gradient(
        #cfd8dd 0deg 30deg,
        rgba(255,255,255,0.06) 30deg 60deg,
        #9aa6b2 60deg 90deg,
        rgba(255,255,255,0.06) 90deg 120deg,
        #6f7f8f 120deg 150deg,
        rgba(255,255,255,0.03) 150deg 360deg
      );
      animation:spin 0.95s linear infinite
    }
    .spinner .hole{width:56px;height:56px;border-radius:50%;background:linear-gradient(180deg,#061226,#0a2938);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:12px;text-align:center;padding:6px;line-height:1.1}
    @keyframes spin{to{transform:rotate(360deg)}}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:110px;background:rgba(0,0,0,0.7);color:#fff;padding:10px 14px;border-radius:10px;display:none;z-index:80;font-weight:700}
    @media(min-width:540px){.app{padding:20px}.card{padding:18px}.logo{width:48px;height:48px}}
  </style>
</head>
<body>
  <div class="app" id="appRoot" aria-live="polite">

    <!-- HEADER -->
    <header>
      <div class="brand" role="banner">
        <div class="logo" aria-hidden="true">DB</div>
        <div>
          <div class="title">Dashboard</div>
          <div class="meta" id="metaDate">1/31/2026</div>
        </div>
      </div>

      <!-- Menu button -->
      <div style="position:relative">
        <button class="menu-btn" id="menuBtn" aria-haspopup="true" aria-expanded="false" aria-label="Open menu">
          ☰
        </button>

        <!-- Menu panel -->
        <div class="menu-panel" id="menuPanel" role="menu" aria-hidden="true">
          <button class="menu-item" id="mTiers" role="menuitem"><span>Member Tiers</span><span class="hint">Upgrade</span></button>
          <button class="menu-item" id="mContribute" role="menuitem"><span>Contribute</span><span class="hint">Bank / USDT</span></button>
          <button class="menu-item" id="mLogout" role="menuitem"><span>Logout</span><span class="hint">Sign out</span></button>
          <button class="menu-item" id="mHelp" role="menuitem"><span>Help & Support</span><span class="hint">Contact</span></button>
        </div>
      </div>

      <!-- small profile circle (keeps identity) -->
      <div class="profile" title="Profile">PD</div>
    </header>

    <!-- MAIN -->
    <main>
      <section class="welcome" aria-labelledby="welcomeTitle">
        <h2 id="welcomeTitle">Welcome back, Member</h2>
        <div class="kpis" role="region" aria-label="Key performance indicators">
          <div class="kpi" title="Active projects"><div class="num">1</div><div style="font-size:12px;color:var(--muted)">Active Projects</div></div>
          <div class="kpi" title="Total contribution"><div class="num">$250</div><div style="font-size:12px;color:var(--muted)">Total Contribution</div></div>
          <div class="kpi" title="Referrals"><div class="num" id="refersNum">20</div><div style="font-size:12px;color:var(--muted)">Referrals</div></div>
        </div>
      </section>

      <article class="card" aria-labelledby="projectHead">
        <div class="project-title" id="projectHead">
          <div><div style="font-weight:800">Agro Processing</div><div style="font-size:12px;color:var(--muted)">Spark • $250</div></div>
          <div style="text-align:right;color:var(--muted)"><div style="font-weight:800">Matures in</div><div>18m</div></div>
        </div>

        <div class="progress" aria-hidden="true" style="margin-top:12px"><i style="width:25%"></i></div>
        <div style="display:flex;justify-content:space-between;margin-top:10px;color:var(--muted);font-size:13px"><div>25%</div><div>Target: $1,000</div></div>

        <div class="form-row" style="margin-top:14px">
          <input class="input" id="projName" placeholder="Project name" aria-label="Project name">
          <input class="input" id="amount" placeholder="250" inputmode="numeric" aria-label="Amount">
        </div>
        <div class="form-row">
          <select class="input" id="method" aria-label="Payment method"><option>Bank Deposit</option><option>Card</option><option>USSD</option></select>
          <button class="submit" id="submitContrib">Submit</button>
        </div>
      </article>

      <section class="tracker card" aria-labelledby="trackerTitle">
        <div id="trackerTitle" class="tracker-title">Project Tracker</div>
        <div style="margin-top:8px;color:var(--muted);font-size:13px">Recent activity will appear here.</div>
      </section>
    </main>

    <!-- REFERRAL BOTTOM BAR -->
    <div class="bottom-bar" role="region" aria-label="referrals">
      <div>
        <div class="ref-count" id="refCount">Referrals: <strong>20</strong></div>
        <div class="ref-note">Share your link. Earn rewards.</div>
      </div>
      <div>
        <button class="btn ghost" id="shareBtn">Share</button>
      </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">Copied!</div>

    <!-- Modals (logout, contribute, tiers, help) -->
    <div class="modal-backdrop" id="logoutModal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" role="document" aria-labelledby="logoutTitle">
        <h3 id="logoutTitle">Confirm Logout</h3>
        <p>Are you sure you want to log out?</p>
        <div class="actions">
          <button class="btn ghost" id="btnNo">No</button>
          <button class="btn warn" id="btnYes">Yes</button>
        </div>
      </div>
    </div>

    <div class="modal-backdrop" id="contributeModal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" role="document" aria-labelledby="contribTitle">
        <h3 id="contribTitle">Contribute</h3>
        <p>Choose a method then copy the payment details to complete your transfer.</p>

        <div class="row" style="margin-top:8px">
          <button class="btn ghost" id="methodBank">Bank Deposit</button>
          <button class="btn ghost" id="methodUSDT">USDT (TRC20)</button>
        </div>

        <div id="bankBlock" style="margin-top:12px;">
          <div class="copy"><span class="label">Bank: FIRST NATIONAL BANK</span>
            <div>Account Name: DREAM BIG PROJECT</div>
            <div>Account Number: <strong id="bankAcct">0123456789</strong></div>
            <div>Sort Code: <strong id="sortCode">001122</strong></div>
          </div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="copy-btn" data-copy="bankAcct">Copy Account</button>
            <button class="copy-btn" data-copy="sortCode">Copy Sort</button>
          </div>
        </div>

        <div id="usdtBlock" style="margin-top:12px;display:none">
          <div class="copy"><span class="label">TRC20 Wallet (USDT)</span>
            <div>Wallet Address:</div>
            <div id="walletAddr" style="word-break:break-all"><strong>TXxExampleWalletAddress1234567890abcdef</strong></div>
          </div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="copy-btn" data-copy="walletAddr">Copy Wallet</button>
            <button class="copy-btn" id="showQR">Show QR (demo)</button>
          </div>
        </div>

        <div class="actions" style="margin-top:14px">
          <button class="btn ghost" id="contribClose">Close</button>
        </div>
      </div>
    </div>

    <div class="modal-backdrop" id="tiersModal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" role="document" aria-labelledby="tiersTitle">
        <h3 id="tiersTitle">Member Tiers</h3>
        <p>Choose a tier that fits your vision. Upgrading increases benefits and access.</p>
        <div style="margin-top:8px;">
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-top:8px">
            <div style="font-weight:800">Pathfinder (Starter)</div>
            <div style="font-size:13px;color:var(--muted)">Access to starter projects. Referrals: 0–19.</div>
            <div style="margin-top:8px"><button class="btn ghost">Upgrade</button></div>
          </div>
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-top:8px">
            <div style="font-weight:800">Builder (Active)</div>
            <div style="font-size:13px;color:var(--muted)">More project access. Referrals: 20–49.</div>
            <div style="margin-top:8px"><button class="btn ghost">Upgrade</button></div>
          </div>
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-top:8px">
            <div style="font-weight:800">Leader (Premium)</div>
            <div style="font-size:13px;color:var(--muted)">Priority deals, staking benefits. Referrals: 50+</div>
            <div style="margin-top:8px"><button class="btn ghost">Contact to Upgrade</button></div>
          </div>
        </div>
        <div class="actions" style="margin-top:12px">
          <button class="btn ghost" id="tiersClose">Close</button>
        </div>
      </div>
    </div>

    <div class="modal-backdrop" id="helpModal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" role="document" aria-labelledby="helpTitle">
        <h3 id="helpTitle">Help & Support</h3>
        <p>We’re here to help. Choose a channel below.</p>
        <div style="margin-top:8px">
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-top:8px">
            <div style="font-weight:800">Email</div>
            <div style="font-size:13px;color:var(--muted)">support@dreambig.example</div>
            <div style="margin-top:8px"><button class="btn ghost" id="emailSupport">Send Email</button></div>
          </div>
          <div style="background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-top:8px">
            <div style="font-weight:800">WhatsApp</div>
            <div style="font-size:13px;color:var(--muted)">+234 800 000 0000</div>
            <div style="margin-top:8px"><button class="btn ghost" id="waSupport">Open WhatsApp</button></div>
          </div>
        </div>
        <div class="actions" style="margin-top:12px">
          <button class="btn ghost" id="helpClose">Close</button>
        </div>
      </div>
    </div>

    <!-- Spinner overlay -->
    <div class="spinner-overlay" id="spinnerOverlay" aria-hidden="true">
      <div class="spinner-panel" role="status" aria-live="polite">
        <div class="spinner" aria-hidden="true">
          <div class="hole" id="spinnerInnerText">Logging out...<br>See you soon.</div>
        </div>
        <div style="color:var(--muted);font-size:14px">Preparing to sign you out</div>
      </div>
    </div>

  </div>

  <script>
    // Elements
    const menuBtn = document.getElementById('menuBtn');
    const menuPanel = document.getElementById('menuPanel');
    const mTiers = document.getElementById('mTiers');
    const mContribute = document.getElementById('mContribute');
    const mLogout = document.getElementById('mLogout');
    const mHelp = document.getElementById('mHelp');

    const logoutModal = document.getElementById('logoutModal');
    const btnNo = document.getElementById('btnNo');
    const btnYes = document.getElementById('btnYes');
    const spinnerOverlay = document.getElementById('spinnerOverlay');
    const spinnerInnerText = document.getElementById('spinnerInnerText');

    const contributeModal = document.getElementById('contributeModal');
    const methodBankBtn = document.getElementById('methodBank');
    const methodUSDTBtn = document.getElementById('methodUSDT');
    const bankBlock = document.getElementById('bankBlock');
    const usdtBlock = document.getElementById('usdtBlock');
    const contribClose = document.getElementById('contribClose');

    const tiersModal = document.getElementById('tiersModal');
    const tiersClose = document.getElementById('tiersClose');

    const helpModal = document.getElementById('helpModal');
    const helpClose = document.getElementById('helpClose');

    const copyButtons = document.querySelectorAll('.copy-btn');
    const toast = document.getElementById('toast');
    const showQR = document.getElementById('showQR');
    const shareBtn = document.getElementById('shareBtn');
    const submitContrib = document.getElementById('submitContrib');

    // Toggle menu
    function openMenu(){
      menuPanel.classList.add('open');
      menuBtn.setAttribute('aria-expanded','true');
      // close on outside click
      setTimeout(()=> {
        document.addEventListener('click', docClickCloseMenu);
      }, 10);
    }
    function closeMenu(){
      menuPanel.classList.remove('open');
      menuBtn.setAttribute('aria-expanded','false');
      document.removeEventListener('click', docClickCloseMenu);
    }
    function docClickCloseMenu(e){
      const panel = menuPanel;
      const btn = menuBtn;
      if(!panel.contains(e.target) && !btn.contains(e.target)) closeMenu();
    }
    menuBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      if(menuPanel.classList.contains('open')) closeMenu(); else openMenu();
    });

    // Menu item actions: open modals and close menu
    mTiers.addEventListener('click', ()=>{ closeMenu(); openModal(tiersModal); });
    mContribute.addEventListener('click', ()=>{ closeMenu(); openModal(contributeModal); showBank(); });
    mLogout.addEventListener('click', ()=>{ closeMenu(); openModal(logoutModal); });
    mHelp.addEventListener('click', ()=>{ closeMenu(); openModal(helpModal); });

    // Generic modal open/close
    function openModal(el){
      el.style.display = 'flex';
      el.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      // focus first button inside if possible
      const btn = el.querySelector('button');
      if(btn) btn.focus();
    }
    function closeModal(el){
      el.style.display = 'none';
      el.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
    }

    // Close modals on backdrop click
    [logoutModal, contributeModal, tiersModal, helpModal].forEach(m => {
      if(!m) return;
      m.addEventListener('click', (ev) => { if(ev.target === m) closeModal(m); });
    });

    // Logout flow
    btnNo.addEventListener('click', ()=> closeModal(logoutModal));
    btnYes.addEventListener('click', ()=> {
      // close modal, show spinner + redirect after 4s
      closeModal(logoutModal);
      spinnerInnerText.innerHTML = 'Logging out...<br>See you soon.';
      spinnerOverlay.style.display = 'flex';
      spinnerOverlay.setAttribute('aria-hidden','false');

      document.getElementById('appRoot').style.transition = 'opacity 450ms ease';
      document.getElementById('appRoot').style.opacity = '0.25';

      setTimeout(()=>{
        document.body.style.transition = 'background-color 350ms ease, opacity 350ms ease';
        document.body.style.backgroundColor = '#000';
        document.body.style.opacity = '0';
        setTimeout(()=> window.location.href = 'login.html', 350);
      }, 4000);
    });

    // Member tiers modal
    tiersClose.addEventListener('click', ()=> closeModal(tiersModal));

    // Contribute modal toggles
    function showBank(){ bankBlock.style.display = 'block'; usdtBlock.style.display = 'none'; methodBankBtn.classList.add('primary'); methodUSDTBtn.classList.remove('primary'); }
    function showUSDT(){ bankBlock.style.display = 'none'; usdtBlock.style.display = 'block'; methodUSDTBtn.classList.add('primary'); methodBankBtn.classList.remove('primary'); }
    methodBankBtn.addEventListener('click', showBank);
    methodUSDTBtn.addEventListener('click', showUSDT);
    contribClose.addEventListener('click', ()=> closeModal(contributeModal));
    if(showQR) showQR.addEventListener('click', ()=> showToast('QR demo not available in this build.'));

    // Help modal
    helpClose.addEventListener('click', ()=> closeModal(helpModal));
    document.getElementById('emailSupport').addEventListener('click', ()=> { window.location.href = 'mailto:support@dreambig.example?subject=Support%20Request'; });
    document.getElementById('waSupport').addEventListener('click', ()=> { const phone = '+2348000000000'; window.open('https://wa.me/' + phone.replace(/\D/g,'') + '?text=' + encodeURIComponent('Hello Dream Big Support, I need help with...'), '_blank'); });

    // Copy to clipboard
    function showToast(msg){ toast.innerText = msg || 'Copied!'; toast.style.display = 'block'; toast.style.opacity = '1'; setTimeout(()=> { toast.style.transition = 'opacity 300ms ease'; toast.style.opacity = '0'; setTimeout(()=> { toast.style.display = 'none'; toast.style.transition=''; }, 300); }, 1400); }
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', (e)=>{
        const key = e.currentTarget.getAttribute('data-copy');
        let text = '';
        if(key === 'bankAcct') text = document.getElementById('bankAcct').innerText.trim();
        else if(key === 'sortCode') text = document.getElementById('sortCode').innerText.trim();
        else if(key === 'walletAddr') text = document.getElementById('walletAddr').innerText.trim();
        if(!text){ showToast('Nothing to copy'); return; }
        if(navigator.clipboard){ navigator.clipboard.writeText(text).then(()=> showToast('Copied to clipboard')); } else {
          const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
          try{ document.execCommand('copy'); showToast('Copied to clipboard'); } catch(e){ showToast('Copy failed'); } ta.remove();
        }
      });
    });

    // Share / contribution demo
    shareBtn.addEventListener('click', async ()=> {
      const url = location.href;
      const shareObj = { title:'Join me on Dream Big', text:'Sign up and start building with Dream Big', url };
      if(navigator.share){ try{ await navigator.share(shareObj); } catch(e){} } else { if(navigator.clipboard) navigator.clipboard.writeText(url).then(()=> showToast('Referral copied')); else alert('Copy and share: ' + url); }
    });
    submitContrib.addEventListener('click', (e)=>{ e.preventDefault(); const amt = document.getElementById('amount').value.trim(); if(!amt || isNaN(amt)){ alert('Please enter a valid amount.'); return; } alert('Contribution of $' + amt + ' recorded (demo).'); document.getElementById('amount').value=''; });

    // Keyboard accessibility (Esc to close)
    document.addEventListener('keydown', (e)=> {
      if(e.key === 'Escape'){
        // close menu
        if(menuPanel.classList.contains('open')) closeMenu();
        // close modals
        [logoutModal, contributeModal, tiersModal, helpModal].forEach(m => { if(m && m.style.display === 'flex') closeModal(m); });
      }
    });

    // init
    (function init(){
      document.getElementById('refersNum').innerText = '20';
      document.getElementById('refCount').querySelector('strong')?.innerText = '20';
      // default payment info placeholders are already in DOM (replace before production)
    })();
  </script>
</body>
</html>
